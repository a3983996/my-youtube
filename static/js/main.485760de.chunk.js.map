{"version":3,"sources":["components/Nav.js","img/search.png","img/list.png","components/Picture.js","pages/HomePage.js","pages/Video.js","App.js","index.js"],"names":["Nav","setTarget","className","type","id","htmlFor","onClick","e","document","querySelector","value","text","src","alt","Picture","item","to","rel","imgSrc","title","HomePage","arrID","setArrID","target","next","setNext","useState","navStatus","setNavStatus","useEffect","a","vIDArr","nextPage","url","process","fetch","urlData","json","body","nextPageToken","items","forEach","push","videoId","snippet","thumbnails","high","console","log","fetchData","loadnext","concat","beforeScroll","documentElement","scrollTop","window","onscroll","func","wait","mustRun","timeout","startTime","Date","context","this","args","arguments","curTime","clearTimeout","apply","setTimeout","throttle","marginBot","scrollHeight","clientHeight","offsetHeight","click","listingPoint","afterScrollTop","delta","nav","style","top","map","uuidv4","Video","useParams","width","height","frameBorder","allow","allowFullScreen","App","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.485760de.chunk.js","sourcesContent":["import React from \"react\";\r\nimport search from \"../img/search.png\";\r\nimport list from \"../img/list.png\";\r\n\r\nconst Nav = ({ setTarget }) => {\r\n  const targetHandler = (e) => {\r\n    if (document.querySelector(\"input[type=text]\").value) {\r\n      let text = document.querySelector(\"input[type=text]\").value;\r\n      setTarget(text);\r\n    }\r\n    document.querySelector(\"input[type=text]\").value = \"\";\r\n  };\r\n  return (\r\n    <nav>\r\n      <h1 className=\"logo\">Youtube</h1>\r\n      <div className=\"search\">\r\n        <input type=\"checkbox\" id=\"input\" />\r\n        <input type=\"text\" />\r\n        <label htmlFor=\"input\" onClick={targetHandler}>\r\n          <img src={search} alt=\"搜尋\" />\r\n        </label>\r\n      </div>\r\n      <div className=\"list\">\r\n        <input type=\"checkbox\" id=\"down\" />\r\n        <label htmlFor=\"down\">\r\n          <img src={list} alt=\"下拉\" />\r\n        </label>\r\n        <ul>\r\n          <li>Youtube</li>\r\n          <li>B站</li>\r\n        </ul>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Nav;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAABmJLR0QA/wD/AP+gvaeTAAADbElEQVRoge2ZvU8UQRiHH8mJAYyKeBZAZUMjNnpiK/bSEGgsICFqSSg0ipZAYaeg/4AmGkPhRyyJrfEj0QZEE8OnIWgCJzlBDVjMgse7c8vtMLO7MfskU8ze5f29v5vbmXdmICUlJSUlueyxHK8COA20AieBJqAe2O99vgLMAxPAW2AMeA2sW87DOY3AEDADbIRsM8Ag0BB51gbUAXeBNcIblW0VGAEOR+ogBJ3AIrs3Ktsi0BGhjx3JoEa1VMJLwH2gB8gBWWCv17Lesx7gAbAcEGfY04qVKuAZ+gTHgS7vO2HidaMmMV3MpyHjWSWD3mwB6GV3o5EB+rxYMv6TXcY25p4mmVnglEWNHDCn0bljUaMsOjVJvEOtsbap92JLvXYHWlrq8M/Gs7gxu0kWmBSaC0CtQ80t5IxcwO7fuBTH8b/Tt12LNqIKgmLRXteiRfQL7Z+4/WcxJATHiXbGrME/iQ24EqvAXxt3uRIL4JLIYcrLzTpnhNAS8RQB1UBe5JIzDRb0S50V/eeodyhqCsAL8azVNFiQYTkTvzQVscCY6BuvEkGGm0T/vamIBaS2zM0K39n+3hxxIVImR0Uuiy5E5Ka+0oVImewTuayaBnIyvUeA8VlckOEV0T9gKmKBg6IvcyubIMNfRf+YqYgFpPasaaAgwx9F/4SpiAWk9mfTQEGG34i+LESi5Jzov3Ih0sL2mXGZeErLGuAHlkrLIHSbh24XQjtwWeQwjf0bky0GhdgE0W8P50UO110KNuA/AOhzKSi4KbTzwCHXoiNCtICjd0jQjP+I51YEutpDvDncH+J9EppT+AsQZ3QI8c1j2qwDrSzqKrVYax3/0uScYfymJ1Gni7Zoxj+yG8CoRY2yyaDuenRXLf2oGdWUGuAG+quWDeA36jIgcqpQdz26pOZQB27VIeJVo9ZZufQkynQGdddTKrE88BC4iKrWsqi9dCVqI9+C+mEe4a+git/ZUZTJRJgGddezwM4jE7ZN8W+C6iRhpmtR1x+yODFpedQ6K5eexJkGtSYPoEYnrNFp4BrBFVQiTYPacOSAq8Bj4APqMHAN+AV8Q51AjgJXvO+WuxFIrGmXtOM3/Qe4EGdSrklNk5r+fyk1kbXFmZRrdKanY80oAqTp+XjTiYY24AtqdM/HnEtKSkpKihF/AY392IKcUAttAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAAeElEQVRoge3WMQ6AIBBE0VEPbWk8moXn0oKQWBDcwmVR/0uoSJaZapEAAAD+a6jcHc1S2BSzjq1TPI0CAGKxB6JRAEAs9kA0CgD4jllpd1jOEpTxlqVEt+GzWonuw2elEq8Jn11LuIWfvAZL2pU+YJuk1fEdAAh0AhXHJ9HQhMRUAAAAAElFTkSuQmCC\"","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nconst Picture = ({ item }) => {\r\n  return (\r\n    <Link\r\n      to={`/video/${item.id}`}\r\n      className=\"picture\"\r\n      // target=\"_blank\"\r\n      rel=\"noreferrer noopener\"\r\n    >\r\n      <img src={item.imgSrc} alt={item.title} />\r\n      <p>{item.title}</p>\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default Picture;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Nav from \"../components/Nav\";\r\nimport Picture from \"../components/Picture\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nconst HomePage = ({ arrID, setArrID, target, setTarget, next, setNext }) => {\r\n  let [navStatus, setNavStatus] = useState(true);\r\n\r\n  useEffect(() => {\r\n    console.log(arrID);\r\n    async function fetchData() {\r\n      let vIDArr = [];\r\n      let nextPage = \"\";\r\n      let url =\r\n        \"https://www.googleapis.com/youtube/v3/search\" +\r\n        `?key=${process.env.REACT_APP_GOOGLE_API_KEY}` +\r\n        \"&part=snippet\" +\r\n        \"&type=video\" +\r\n        \"&maxResults=10\" +\r\n        \"&safeSearch=strict\" +\r\n        \"&q=\" +\r\n        target;\r\n      if (target !== \"\") {\r\n        setNext(\"\");\r\n        vIDArr = [];\r\n        try {\r\n          let urlData = await fetch(url);\r\n          let body = await urlData.json();\r\n          nextPage = body.nextPageToken;\r\n          body.items.forEach((item) => {\r\n            vIDArr.push({\r\n              id: item.id.videoId,\r\n              imgSrc: item.snippet.thumbnails.high.url,\r\n              title: item.snippet.title,\r\n            });\r\n          });\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n        setArrID(vIDArr);\r\n        setNext(nextPage);\r\n      }\r\n    }\r\n    fetchData();\r\n  }, [target]);\r\n  const loadnext = async () => {\r\n    let vIDArr = [];\r\n    let nextPage = \"\";\r\n    let url =\r\n      \"https://www.googleapis.com/youtube/v3/search\" +\r\n      `?key=${process.env.REACT_APP_GOOGLE_API_KEY}` +\r\n      \"&part=snippet\" +\r\n      \"&type=video\" +\r\n      \"&maxResults=10\" +\r\n      \"&safeSearch=strict\" +\r\n      \"&q=\" +\r\n      target +\r\n      \"&pageToken=\" +\r\n      next;\r\n\r\n    try {\r\n      let urlData = await fetch(url);\r\n      let body = await urlData.json();\r\n      nextPage = body.nextPageToken;\r\n      body.items.forEach((item) => {\r\n        vIDArr.push({\r\n          id: item.id.videoId,\r\n          imgSrc: item.snippet.thumbnails.high.url,\r\n          title: item.snippet.title,\r\n        });\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n    setArrID(arrID.concat(vIDArr));\r\n    setNext(nextPage);\r\n  };\r\n  const throttle = (func, wait, mustRun) => {\r\n    let timeout,\r\n      startTime = new Date();\r\n    return function () {\r\n      let context = this,\r\n        args = arguments,\r\n        curTime = new Date();\r\n\r\n      clearTimeout(timeout);\r\n      if (curTime - startTime >= mustRun) {\r\n        func.apply(context, args);\r\n        startTime = curTime;\r\n      } else {\r\n        timeout = setTimeout(func, wait);\r\n      }\r\n    };\r\n  };\r\n  const listingPoint = () => {\r\n    let marginBot;\r\n    if (document.body.scrollTop) {\r\n      marginBot =\r\n        document.body.scrollHeight -\r\n        document.body.scrollTop -\r\n        document.body.clientHeight;\r\n    } else {\r\n      marginBot =\r\n        document.documentElement.scrollHeight -\r\n        document.documentElement.scrollTop -\r\n        document.documentElement.clientHeight;\r\n    }\r\n\r\n    if (\r\n      document.querySelector(\".picture\") &&\r\n      marginBot <= 0 + document.querySelector(\".picture\").offsetHeight * 2\r\n    ) {\r\n      document.querySelector(\".loadnext\").click();\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    let beforeScroll = document.documentElement.scrollTop;\r\n\r\n    window.onscroll = throttle(\r\n      function () {\r\n        listingPoint();\r\n        let afterScrollTop = document.documentElement.scrollTop;\r\n        let delta = afterScrollTop - beforeScroll;\r\n        beforeScroll = afterScrollTop;\r\n        if (delta > 0) {\r\n          setNavStatus(false);\r\n        } else {\r\n          setNavStatus(true);\r\n        }\r\n      },\r\n      500,\r\n      500\r\n    );\r\n  }, []);\r\n  useEffect(() => {\r\n    let nav = document.querySelector(\"nav\");\r\n    if (navStatus) {\r\n      nav.style.top = \"0px\";\r\n    } else {\r\n      nav.style.top = \"-50px\";\r\n    }\r\n  }, [navStatus]);\r\n  return (\r\n    <div className=\"homePage\">\r\n      <Nav setTarget={setTarget} />\r\n      <div className=\"videos\">\r\n        {arrID &&\r\n          arrID.map((item) => {\r\n            return <Picture item={item} key={uuidv4()} />;\r\n          })}\r\n      </div>\r\n      <button onClick={loadnext} className=\"loadnext\"></button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import React from \"react\";\r\nimport { useParams } from \"react-router\";\r\n// import { Link } from \"react-router-dom\";\r\n\r\nconst Video = () => {\r\n  let { id } = useParams();\r\n  return (\r\n    <div className=\"video\">\r\n      <iframe\r\n        width=\"560px\"\r\n        height=\"315px\"\r\n        src={\"https://www.youtube.com/embed/\" + id}\r\n        title=\"Youtube video player\"\r\n        frameBorder=\"0\"\r\n        allow=\"accelerometer; autoplay; clipboardWrite; encryptedMedia; gyroscope; pictureInPicture\"\r\n        allowFullScreen\r\n      ></iframe>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Video;\r\n","import React, { useState } from \"react\";\r\nimport HomePage from \"./pages/HomePage\";\r\nimport Video from \"./pages/Video\";\r\nimport \"./styles/style.css\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\n\r\nconst App = () => {\r\n  let [arrID, setArrID] = useState([]);\r\n  let [target, setTarget] = useState(\"\");\r\n  let [next, setNext] = useState(\"\");\r\n  return (\r\n    <main>\r\n      <Switch>\r\n        <Route path=\"/video/:id\">\r\n          <Video />\r\n        </Route>\r\n        <Route path=\"/\">\r\n          <HomePage\r\n            arrID={arrID}\r\n            setArrID={setArrID}\r\n            target={target}\r\n            setTarget={setTarget}\r\n            next={next}\r\n            setNext={setNext}\r\n          />\r\n        </Route>\r\n      </Switch>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { BrowserRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}